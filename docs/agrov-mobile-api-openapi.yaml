openapi: 3.0.3
info:
  title: AGROV Mobile API
  version: 1.0.0
  description: |
    API REST para o aplicativo móvel AgrovMobile, que funciona como complemento ao sistema AGROV ERP.
    
    Fornece funcionalidades essenciais para:
    - Gestão de atividades agrícolas
    - Monitoramento de pragas (Scout)
    - Sincronização de dados em campo
    
    **Autenticação**: A API utiliza JWT (JSON Web Tokens) para autenticação. 
    Todos os endpoints (exceto login) requerem um token JWT válido no header `Authorization: Bearer <token>`.
    
    **Sincronização**: A API suporta sincronização incremental através do parâmetro `lastSync` 
    (formato: `yyyy-MM-ddTHH:mm:ss`).
  contact:
    name: AGROV ERP
    email: suporte@agrov.com.br
  license:
    name: Proprietary
    url: https://www.agrov.com.br

servers:
  - url: http://localhost:8080
    description: Servidor de Desenvolvimento
  - url: https://api.agrov.com.br
    description: Servidor de Produção

tags:
  - name: Autenticação Mobile
    description: Endpoints de autenticação para o aplicativo móvel AgrovMobile
  - name: Atividades Mobile
    description: Endpoints para gestão de atividades agrícolas no aplicativo móvel
  - name: Monitoramento de Pragas (Scout)
    description: Endpoints para gestão de monitoramentos de pragas no aplicativo móvel

security:
  - Bearer: []

paths:
  /mobile/auth/login:
    post:
      tags:
        - Autenticação Mobile
      summary: Autenticação de usuário
      description: |
        Autentica o usuário e retorna um token JWT válido. O token contém informações do usuário e fazenda selecionada.
        
        O token deve ser enviado em todas as requisições subsequentes no header:
        `Authorization: Bearer <token>`
      operationId: login
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthRequest'
            example:
              email: "usuario@exemplo.com"
              senha: "senha123"
              deviceId: "device-uuid-123"
              platform: "Android"
              fazendaId: 1
      responses:
        '200':
          description: Login realizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseAuthResponse'
              example:
                success: true
                message: "Login realizado com sucesso"
                data:
                  token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  tokenType: "Bearer"
                  expiresIn: 86400
                  expiresAt: "2024-01-16T10:30:00"
                  usuario:
                    id: 1
                    nome: "João Silva"
                    email: "usuario@exemplo.com"
                    telefone: "(11) 99999-9999"
                    cpf: "123.456.789-00"
                  fazendaPadrao:
                    id: 1
                    nome: "Fazenda São João"
                    cnpj: "12.345.678/0001-90"
                    cidade: "Ribeirão Preto"
                    estado: "SP"
                    areaTotal: 500.0
                  fazendasDisponiveis:
                    - id: 1
                      nome: "Fazenda São João"
                      cnpj: "12.345.678/0001-90"
                      cidade: "Ribeirão Preto"
                      estado: "SP"
                      areaTotal: 500.0
                timestamp: "2024-01-15T10:30:00"
        '400':
          description: Credenciais inválidas ou dados faltando
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '401':
          description: Usuário ou senha inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '403':
          description: Usuário não possui fazendas vinculadas
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/atividades:
    get:
      tags:
        - Atividades Mobile
      summary: Listar atividades
      description: |
        Lista todas as atividades da fazenda do usuário. Suporta sincronização incremental através do parâmetro lastSync.
        
        **Sincronização Incremental**: 
        - Envie a data/hora da última sincronização no formato `yyyy-MM-ddTHH:mm:ss`
        - Apenas registros criados ou modificados após esta data serão retornados
        - Se não informado, retorna todos os registros
      operationId: listarAtividades
      parameters:
        - name: lastSync
          in: query
          description: "Data/hora da última sincronização (formato: yyyy-MM-ddTHH:mm:ss). Retorna apenas registros modificados após esta data."
          required: false
          schema:
            type: string
            format: date-time
            example: "2024-01-15T10:30:00"
      responses:
        '200':
          description: Lista de atividades retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListAtividade'
              example:
                success: true
                message: "Operação realizada com sucesso"
                data:
                  - id: 1
                    codigo: "ATV-2024-001"
                    titulo: "Aplicação de Defensivos"
                    descricao: "Aplicação de inseticida no talhão 1"
                    prioridade: "ALTA"
                    situacao: "EM_ANDAMENTO"
                    tipo: "APLICACAO"
                    etapa: "PREPARACAO"
                    dataInicio: "2024-01-15T08:00:00"
                    dataFim: "2024-01-15T12:00:00"
                    createdAt: "2024-01-15T07:30:00"
                    updatedAt: "2024-01-15T12:00:00"
                    retirarEstoque: true
                    custoAproximado: 1500.50
                    usuarioResponsavel:
                      id: 1
                      nome: "João Silva"
                      email: "joao@exemplo.com"
                    scoutId: null
                    talhoes:
                      - id: 1
                        nome: "Talhão 1"
                        area: 50.0
                        culturaAtual: "Soja"
                        coordinates: [[-21.123, -47.456], [-21.124, -47.457]]
                        color: "#FF5733"
                    safra:
                      id: 1
                      nome: "Safra 2023/2024"
                      culturaDescricao: "Soja"
                      dataInicio: "2023-10-01"
                      dataFim: "2024-03-31"
                      ativa: true
                    produtosUtilizados:
                      - id: 1
                        produtoId: 10
                        produtoNome: "Inseticida X"
                        produtoTipo: "DEFENSIVO"
                        quantidade: 5.0
                        unidadeMedida: "L"
                        valorUnitario: 250.00
                        valorTotal: 1250.00
                    maquinariosUtilizados: []
                    funcionariosUtilizados: []
                    sincronizado: true
                    ultimaSincronizacao: "2024-01-15T12:00:00"
                timestamp: "2024-01-15T10:30:00"
        '400':
          description: Formato de data inválido para lastSync
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

    post:
      tags:
        - Atividades Mobile
      summary: Criar atividade
      description: |
        Cria uma nova atividade agrícola. A atividade é automaticamente vinculada à fazenda do usuário autenticado.
        
        **Validações**:
        - Pelo menos um talhão deve ser informado
        - Dados obrigatórios: título, talhões
      operationId: criarAtividade
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Atividade'
            example:
              titulo: "Aplicação de Defensivos"
              descricao: "Aplicação de inseticida no talhão 1"
              prioridade: "ALTA"
              situacao: "EM_ANDAMENTO"
              tipo: "APLICACAO"
              etapa: "PREPARACAO"
              dataInicio: "2024-01-15T08:00:00"
              dataFim: "2024-01-15T12:00:00"
              retirarEstoque: true
              talhoes:
                - id: 1
              safra:
                id: 1
              produtosUtilizados:
                - produtoId: 10
                  quantidade: 5.0
                  unidadeMedida: "L"
                  valorUnitario: 250.00
      responses:
        '201':
          description: "Atividade criada com sucesso"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseAtividade'
        '400':
          description: "Dados inválidos ou faltando (ex: talhões não informados)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '401':
          description: "Token JWT inválido ou ausente"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: "Erro interno do servidor"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/atividades/{id}:
    put:
      tags:
        - Atividades Mobile
      summary: Atualizar atividade
      description: |
        Atualiza uma atividade existente. Apenas atividades da fazenda do usuário podem ser atualizadas.
        
        **Validações**:
        - O ID na URL deve corresponder ao ID no payload
        - A atividade deve pertencer à fazenda do usuário
      operationId: atualizarAtividade
      parameters:
        - name: id
          in: path
          required: true
          description: ID da atividade a ser atualizada
          schema:
            type: integer
            format: int64
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Atividade'
      responses:
        '200':
          description: Atividade atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseAtividade'
        '400':
          description: Dados inválidos ou ID da URL difere do payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '404':
          description: Atividade não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

    delete:
      tags:
        - Atividades Mobile
      summary: Remover atividade
      description: |
        Remove uma atividade. Apenas atividades da fazenda do usuário podem ser removidas.
      operationId: removerAtividade
      parameters:
        - name: id
          in: path
          required: true
          description: ID da atividade a ser removida
          schema:
            type: integer
            format: int64
            example: 1
      responses:
        '200':
          description: Atividade removida com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseGeneric'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '404':
          description: Atividade não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/scouts:
    get:
      tags:
        - Monitoramento de Pragas (Scout)
      summary: Listar monitoramentos
      description: |
        Lista todos os monitoramentos de pragas da fazenda do usuário. Suporta sincronização incremental através do parâmetro lastSync.
      operationId: listarScouts
      parameters:
        - name: lastSync
          in: query
          description: "Data/hora da última sincronização (formato: yyyy-MM-ddTHH:mm:ss). Retorna apenas registros modificados após esta data."
          required: false
          schema:
            type: string
            format: date-time
            example: "2024-01-15T10:30:00"
      responses:
        '200':
          description: Lista de monitoramentos retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListScout'
        '400':
          description: Formato de data inválido para lastSync
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

    post:
      tags:
        - Monitoramento de Pragas (Scout)
      summary: Criar monitoramento
      description: |
        Cria um novo monitoramento de pragas. O monitoramento é automaticamente vinculado à fazenda do usuário autenticado.
        
        **Validações**:
        - Talhão é obrigatório
      operationId: criarScout
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Scout'
            example:
              nome: "Monitoramento Talhão 1"
              observacao: "Primeiro monitoramento da safra"
              talhao:
                id: 1
              markers:
                - numero: 1
                  latitude: "-21.123456"
                  longitude: "-47.456789"
                  visitado: false
      responses:
        '201':
          description: Monitoramento criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseScout'
        '400':
          description: "Dados inválidos ou faltando (ex: talhão não informado)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/scouts/{id}:
    put:
      tags:
        - Monitoramento de Pragas (Scout)
      summary: Atualizar monitoramento
      description: |
        Atualiza um monitoramento existente. Apenas monitoramentos da fazenda do usuário podem ser atualizados.
      operationId: atualizarScout
      parameters:
        - name: id
          in: path
          required: true
          description: ID do monitoramento a ser atualizado
          schema:
            type: integer
            format: int64
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Scout'
      responses:
        '200':
          description: Monitoramento atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseScout'
        '400':
          description: Dados inválidos ou ID da URL difere do payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '404':
          description: Monitoramento não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/scouts/pragas:
    get:
      tags:
        - Monitoramento de Pragas (Scout)
      summary: Listar pragas
      description: |
        Lista as pragas disponíveis no sistema. Pode ser filtrada por cultura e tipo.
      operationId: listarPragas
      parameters:
        - name: cultura
          in: query
          description: Filtrar por cultura
          required: false
          schema:
            type: string
            example: "Soja"
        - name: tipo
          in: query
          description: Filtrar por tipo de praga
          required: false
          schema:
            type: string
            example: "Inseto"
      responses:
        '200':
          description: Lista de pragas retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListPraga'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/scouts/pragas/{id}:
    get:
      tags:
        - Monitoramento de Pragas (Scout)
      summary: Obter detalhes da praga
      description: |
        Retorna informações completas de uma praga, incluindo imagem.
      operationId: getPragaById
      parameters:
        - name: id
          in: path
          required: true
          description: ID da praga
          schema:
            type: integer
            format: int64
            example: 1
      responses:
        '200':
          description: Detalhes da praga retornados com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponsePragaDetail'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '404':
          description: Praga não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'
        '500':
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/scouts/limiar-estagio:
    get:
      tags:
        - Monitoramento de Pragas (Scout)
      summary: Listar enum limiar por estádio
      description: |
        Retorna os valores disponíveis do enum EnumLimiarPorEstadio para uso em monitoramentos.
      operationId: listarEnumLimiarEstagio
      responses:
        '200':
          description: Lista de valores do enum retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListString'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

  /mobile/scouts/unidade-fenologica:
    get:
      tags:
        - Monitoramento de Pragas (Scout)
      summary: Listar enum unidade fenológica
      description: |
        Retorna os valores disponíveis do enum EnumUnidadeFenologica para uso em monitoramentos.
      operationId: listarUnidadeFenologica
      responses:
        '200':
          description: Lista de valores do enum retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListString'
        '401':
          description: Token JWT inválido ou ausente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseError'

components:
  securitySchemes:
    Bearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Autenticação JWT usando Bearer Token. 
        Obtenha o token através do endpoint /mobile/auth/login.
        Envie o token no header: Authorization: Bearer <token>

  schemas:
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indica se a operação foi bem-sucedida
        message:
          type: string
          description: Mensagem descritiva da operação
        data:
          description: Dados da resposta (genérico)
        timestamp:
          type: string
          format: date-time
          description: Data/hora da resposta
        errorCode:
          type: string
          nullable: true
          description: Código do erro (quando aplicável)
        errorDetails:
          description: Detalhes adicionais do erro (quando aplicável)
          nullable: true

    ApiResponseAuthResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/AuthResponse'

    ApiResponseAtividade:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Atividade'

    ApiResponseListAtividade:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Atividade'

    ApiResponseScout:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Scout'

    ApiResponseListScout:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Scout'

    ApiResponsePragaDetail:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/PragaDetail'

    ApiResponseListPraga:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Praga'

    ApiResponseListString:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                type: string

    ApiResponseGeneric:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              nullable: true

    ApiResponseError:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: false
            message:
              type: string
              example: "Erro ao processar requisição"

    AuthRequest:
      type: object
      required:
        - email
        - senha
      properties:
        email:
          type: string
          format: email
          description: Email do usuário
          example: "usuario@exemplo.com"
        senha:
          type: string
          format: password
          description: Senha do usuário
          example: "senha123"
        deviceId:
          type: string
          description: Identificador único do dispositivo
          example: "device-uuid-123"
        platform:
          type: string
          description: Plataforma do dispositivo (Android, iOS)
          example: "Android"
        fazendaId:
          type: integer
          format: int64
          description: ID da fazenda selecionada (opcional). Se não informado, usa a primeira fazenda disponível.
          example: 1

    AuthResponse:
      type: object
      properties:
        token:
          type: string
          description: Token JWT para autenticação
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        tokenType:
          type: string
          description: Tipo do token
          example: "Bearer"
        expiresIn:
          type: integer
          format: int64
          description: Tempo de expiração em segundos
          example: 86400
        expiresAt:
          type: string
          format: date-time
          description: Data/hora de expiração do token
          example: "2024-01-16T10:30:00"
        usuario:
          $ref: '#/components/schemas/Usuario'
        fazendaPadrao:
          $ref: '#/components/schemas/Fazenda'
        fazendasDisponiveis:
          type: array
          items:
            $ref: '#/components/schemas/Fazenda'

    Usuario:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "João Silva"
        email:
          type: string
          format: email
          example: "joao@exemplo.com"
        telefone:
          type: string
          example: "(11) 99999-9999"
        cpf:
          type: string
          example: "123.456.789-00"

    Fazenda:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Fazenda São João"
        cnpj:
          type: string
          example: "12.345.678/0001-90"
        cidade:
          type: string
          example: "Ribeirão Preto"
        estado:
          type: string
          example: "SP"
        areaTotal:
          type: number
          format: double
          example: 500.0

    TalhaoSimplificado:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Talhão 1"
        area:
          type: number
          format: double
          example: 50.0
        culturaAtual:
          type: string
          example: "Soja"
        coordinates:
          type: array
          description: Polígono do talhão como array de coordenadas [lat, lng]
          items:
            type: array
            items:
              type: number
          example: [[-21.123, -47.456], [-21.124, -47.457], [-21.125, -47.458]]
        color:
          type: string
          example: "#FF5733"

    SafraSimplificada:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Safra 2023/2024"
        culturaDescricao:
          type: string
          example: "Soja"
        dataInicio:
          type: string
          format: date
          example: "2023-10-01"
        dataFim:
          type: string
          format: date
          example: "2024-03-31"
        ativa:
          type: boolean
          example: true

    Atividade:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        codigo:
          type: string
          example: "ATV-2024-001"
        titulo:
          type: string
          description: Título da atividade
          example: "Aplicação de Defensivos"
        descricao:
          type: string
          nullable: true
          example: "Aplicação de inseticida no talhão 1"
        prioridade:
          type: string
          nullable: true
          example: "ALTA"
        situacao:
          type: string
          nullable: true
          example: "EM_ANDAMENTO"
        tipo:
          type: string
          nullable: true
          example: "APLICACAO"
        etapa:
          type: string
          nullable: true
          example: "PREPARACAO"
        dataInicio:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T08:00:00"
        dataFim:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T12:00:00"
        createdAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T07:30:00"
        updatedAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T12:00:00"
        retirarEstoque:
          type: boolean
          nullable: true
          example: true
        custoAproximado:
          type: number
          format: decimal
          nullable: true
          example: 1500.50
        usuarioResponsavel:
          $ref: '#/components/schemas/Usuario'
        scoutId:
          type: integer
          format: int64
          nullable: true
          example: 1
        talhoes:
          type: array
          items:
            $ref: '#/components/schemas/TalhaoSimplificado'
        safra:
          $ref: '#/components/schemas/SafraSimplificada'
        produtosUtilizados:
          type: array
          items:
            $ref: '#/components/schemas/ProdutoUtilizado'
        maquinariosUtilizados:
          type: array
          items:
            $ref: '#/components/schemas/MaquinarioUtilizado'
        funcionariosUtilizados:
          type: array
          items:
            $ref: '#/components/schemas/FuncionarioUtilizado'
        sincronizado:
          type: boolean
          nullable: true
          example: true
        ultimaSincronizacao:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T12:00:00"

    ProdutoUtilizado:
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          example: 1
        produtoId:
          type: integer
          format: int64
          example: 10
        produtoNome:
          type: string
          nullable: true
          example: "Inseticida X"
        produtoTipo:
          type: string
          nullable: true
          example: "DEFENSIVO"
        quantidade:
          type: number
          format: double
          nullable: true
          example: 5.0
        unidadeMedida:
          type: string
          nullable: true
          example: "L"
        valorUnitario:
          type: number
          format: decimal
          nullable: true
          example: 250.00
        valorTotal:
          type: number
          format: decimal
          nullable: true
          example: 1250.00

    MaquinarioUtilizado:
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          example: 1
        maquinarioId:
          type: integer
          format: int64
          example: 5
        maquinarioNome:
          type: string
          nullable: true
          example: "Pulverizador 1000L"
        maquinarioTipo:
          type: string
          nullable: true
          example: "PULVERIZADOR"
        combustivelUtilizado:
          type: number
          format: double
          nullable: true
          example: 50.0
        horasTrabalhadas:
          type: string
          nullable: true
          example: "4.5"

    FuncionarioUtilizado:
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          example: 1
        funcionarioId:
          type: integer
          format: int64
          example: 3
        funcionarioNome:
          type: string
          nullable: true
          example: "Maria Santos"
        funcionarioCpf:
          type: string
          nullable: true
          example: "987.654.321-00"
        horasTrabalhadas:
          type: string
          nullable: true
          example: "8.0"
        dataInicial:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T08:00:00"
        dataFinal:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T16:00:00"

    Scout:
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          example: 1
        nome:
          type: string
          example: "Monitoramento Talhão 1"
        status:
          type: string
          nullable: true
          example: "EM_ANDAMENTO"
        observacao:
          type: string
          nullable: true
          example: "Primeiro monitoramento da safra"
        createdAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T08:00:00"
        updatedAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T10:00:00"
        talhao:
          $ref: '#/components/schemas/TalhaoSimplificado'
        usuarioResponsavel:
          $ref: '#/components/schemas/Usuario'
        markers:
          type: array
          items:
            $ref: '#/components/schemas/ScoutMarker'
        totalMarkers:
          type: integer
          nullable: true
          example: 10
        markersVisitados:
          type: integer
          nullable: true
          example: 5
        totalPragas:
          type: integer
          nullable: true
          example: 15
        percentualInfestacao:
          type: number
          format: double
          nullable: true
          example: 25.5
        sincronizado:
          type: boolean
          nullable: true
          example: true
        ultimaSincronizacao:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T10:00:00"

    ScoutMarker:
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          example: 1
        numero:
          type: integer
          example: 1
        latitude:
          type: string
          example: "-21.123456"
        longitude:
          type: string
          example: "-47.456789"
        visitado:
          type: boolean
          example: false
        dataMarcacao:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T08:00:00"
        pragas:
          type: array
          items:
            $ref: '#/components/schemas/PragaContagem'

    PragaContagem:
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          example: 1
        pragaId:
          type: integer
          format: int64
          example: 5
        pragaNome:
          type: string
          nullable: true
          example: "Lagarta-do-cartucho"
        pragaNomeCientifico:
          type: string
          nullable: true
          example: "Spodoptera frugiperda"
        tipoPraga:
          type: string
          nullable: true
          example: "Inseto"
        contagem:
          type: integer
          nullable: true
          example: 5
        presenca:
          type: boolean
          nullable: true
          example: true
        estadioFenologico:
          type: string
          nullable: true
          example: "V3"
        limiarPorEstadio:
          type: string
          nullable: true
          example: "Larva"
        unidadeFenologica:
          type: string
          nullable: true
          example: "Indivíduo/m2"
        unidadeContagem:
          type: string
          nullable: true
          example: "Indivíduo"
        prioridade:
          type: string
          nullable: true
          example: "ALTA"
        dataContagem:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T09:00:00"
        observacao:
          type: string
          nullable: true
          example: "Praga encontrada em folhas novas"

    Praga:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Lagarta-do-cartucho"
        nomeComum:
          type: string
          nullable: true
          example: "Lagarta-do-cartucho"
        nomeCientifico:
          type: string
          nullable: true
          example: "Spodoptera frugiperda"
        cultura:
          type: string
          nullable: true
          example: "Soja"
        imagemId:
          type: integer
          format: int64
          nullable: true
          example: 10

    PragaDetail:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        nome:
          type: string
          example: "Lagarta-do-cartucho"
        nomeComum:
          type: string
          nullable: true
          example: "Lagarta-do-cartucho"
        nomeCientifico:
          type: string
          nullable: true
          example: "Spodoptera frugiperda"
        cultura:
          type: string
          nullable: true
          example: "Soja"
        imagem:
          type: string
          format: byte
          description: Imagem da praga em base64
          nullable: true

